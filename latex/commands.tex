\newcommand{\unsure}[1]{\textcolor{red}{#1}}
\newcommand{\note}[1]{\textcolor{gray}{#1}}
% \newcommand{\rrnote}[1]{\textcolor{blue}{#1}}  % replaced by much nicer macro

\def\SOMns{SOM{\sc ns}\xspace}

\newcommand{\ie}{i.e.\xspace}
\newcommand{\eg}{e.g.\xspace}

\newcommand{\code}[1]{\texttt{#1}}
% \newcommand{\code}[1]{\lstinline!#1!}

\usepackage{letltxmacro}
\LetLtxMacro{\OrgCitep}{\citep}
\renewcommand{\citep}[1]{\,\OrgCitep{#1}}

% define \citeurl
%  #1 link text (for HTML version)
%  #2 title
%  #3 author
%  [#4] date of retrival
%  #5  url
% Example:
%   \citeurl{linktext}{Welcome to the Jungle}{Herb Sutter}{27 June 2012}{http://herbsutter.com/welcome-to-the-jungle/}
% Result:
%   \footnote{\emph{Welcome to the Jungle}, Herb Sutter, access date: 27 June 2012
%     \url{http://herbsutter.com/welcome-to-the-jungle/}}
\usepackage{ifthen}
\newcommand{\citeurl}[5]{%
#1\footnote{\emph{#2}%
          \ifthenelse{\equal{#3}{}}%
                     {}%          then i.e. empty #3
                     {, #3}% else i.e. non-empty #3
          \ifthenelse{\equal{#4}{}}%
                     {}%          then i.e. empty #4
                     {, access date: #4}% else i.e. non-empty #4
, \url{#5}}}
